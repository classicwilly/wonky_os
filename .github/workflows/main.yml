jobs:
  your_job_id:
    # ...
    permissions:
      id-token: write # Required to get the OIDC token
      contents: read

    steps:
    - name: Authenticate to Google Cloud
      id: auth
      uses: 'google-github-actions/auth@v2'
      with:
        workload_identity_provider: 'projects/PROJECT_NUMBER/locations/global/workloadIdentityPools/github-pool/providers/your-provider-name'
        service_account: 'github-action-1095403672@wonky-sprout-os.iam.gserviceaccount.com'

    - name: 'Run your gcloud command'
      run: |
        # This command will now work because you are authenticated
        gcloud ...
